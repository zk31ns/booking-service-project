name: Notify PR Merged in Telegram

on:
  pull_request:
    types: [closed]

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Check if PR was merged
        id: check_merge
        run: |
          if [ "${{ github.event.pull_request.merged }}" == "true" ]; then
            echo "merged=true" >> $GITHUB_OUTPUT
          fi

      - name: Send Telegram notification
        if: steps.check_merge.outputs.merged == 'true'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            âœ… **PR ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ ÑĞ¼Ñ‘Ñ€Ğ¶ĞµĞ½ Ğ² develop!**

            ğŸ“Œ PR: #${{ github.event.pull_request.number }}
            ğŸ“ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ: ${{ github.event.pull_request.title }}
            ğŸ‘¤ ĞĞ²Ñ‚Ğ¾Ñ€: @${{ github.event.pull_request.user.login }}

            ğŸ”— Ğ¡ÑÑ‹Ğ»ĞºĞ°: ${{ github.event.pull_request.html_url }}

            âœ¨ Ğ’ĞµÑ‚ĞºĞ° `${{ github.event.pull_request.head.ref }}` ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ² develop
          format: html
