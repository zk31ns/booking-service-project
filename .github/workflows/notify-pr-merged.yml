name: Notify PR Merged in Telegram

on:
  pull_request:
    types: [closed]

jobs:
  notify:
    runs-on: ubuntu-latest
    
    steps:
      - name: Check if PR was merged
        id: check_merge
        run: |
          if [ "${{ github.event.pull_request.merged }}" == "true" ]; then
            echo "merged=true" >> $GITHUB_OUTPUT
          fi
      
      - name: Send Telegram notification
        if: steps.check_merge.outputs.merged == 'true'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ‚úÖ **PR —É—Å–ø–µ—à–Ω–æ —Å–º—ë—Ä–∂–µ–Ω –≤ develop!**
            
            üìå PR: #${{ github.event.pull_request.number }}
            üìù –ù–∞–∑–≤–∞–Ω–∏–µ: ${{ github.event.pull_request.title }}
            üë§ –ê–≤—Ç–æ—Ä: @${{ github.event.pull_request.user.login }}
            
            üîó –°—Å—ã–ª–∫–∞: ${{ github.event.pull_request.html_url }}
            
            ‚ú® –í–µ—Ç–∫–∞ `${{ github.event.pull_request.head.ref }}` —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ develop
          format: html
